(this["webpackJsonpsort-animation"]=this["webpackJsonpsort-animation"]||[]).push([[0],{14:function(e,t,n){"use strict";n.r(t);var c=n(1),a=n(0),o=n.n(a),r=n(8),i=n.n(r),l=n(3),u=n(2),s=function(e,t){var n=Object(a.useState)(e),c=Object(u.a)(n,2),o=c[0],r=c[1],i=Object(a.useState)(!0),l=Object(u.a)(i,2),s=l[0],d=l[1],b=Object(a.useRef)((function(){})),j=Object(a.useRef)((function(e){return!0})),x=Object(a.useCallback)((function(e,t){return d(!1),b.current=e,j.current=t,f}),[]),f=Object(a.useCallback)((function(){r(e)}),[]);return Object(a.useEffect)((function(){s||(requestAnimationFrame((function(){j.current(o)?b.current(o):(r(o+t),d(!1))})),d(!0))}),[s]),{data:o,start:x}},d=n(4);var b=function(){var e=Object(a.useState)([3,2,6,8,7,9,1,4,5]),t=Object(u.a)(e,2),n=t[0],o=t[1],r=s(0,10),i=s(0,-10),b=function(e){var t=Object(a.useRef)(!0),n=Object(a.useRef)(!0),c=Object(a.useState)({index:0,data:Object(l.a)(e),exchange:!1}),o=Object(u.a)(c,2),r=o[0],i=o[1],s=Object(a.useMemo)((function(){var c=!1,a=function(e){c=e},o=function(e){a(!1),e()};return function(l){console.log(t.current,"-----------------"),c||t.current||(a(!0),setTimeout((function(){if(r.data[r.index]>r.data[r.index+1]){console.log("\u4ea4\u6362"),n.current=!1;var t=r.data[r.index];r.data[r.index]=r.data[r.index+1],r.data[r.index+1]=t,r.exchange=!0,i(Object(d.a)({},r))}else console.log("\u524d\u8fdb"),r.exchange=!1,r.index++,r.index===e.length-1&&(n.current?j(!0):n.current=!0,r.index=0),i(Object(d.a)({},r));l(o,Object(d.a)({},r))}),50))}}),[]),b=Object(a.useCallback)((function(e){console.log("Bubble next",t.current),s(e)}),[s]),j=Object(a.useCallback)((function(e){console.log("Bubble setStop",t.current),t.current=e}),[]);return{data:r,next:b,setStop:j}}(n),j=b.data,x=b.setStop,f=b.next,O=j.index,h=(j.exchange,Object(a.useCallback)((function(){f((function(e,t){if(t.exchange)var n=i.start((function(a){o(Object(l.a)(t.data)),n(),c(),e(h)}),(function(e){return console.log("-----",e),-70===e})),c=r.start((function(e){}),(function(e){return 70===e}));else e(h)}))}),[j.index,j.exchange].concat(Object(l.a)(j.data)))),g=Object(a.useCallback)((function(){x(!1),h()}),[]);return Object(c.jsxs)("div",{children:[Object(c.jsx)("h2",{children:"\u5192\u6ce1\u6392\u5e8f"}),Object(c.jsx)("div",{style:{display:"flex",alignItems:"flex-end"},children:n.map((function(e,t){return Object(c.jsx)("div",{style:{width:"50px",height:20*e,background:t===O||t===O+1?"red":"yellow",transform:t===O?"translateX(".concat(r.data,"px)"):t===O+1?"translateX(".concat(i.data,"px)"):"translateX(0px)",margin:"0 10px",float:"left"},children:Object(c.jsxs)("div",{children:["i: ",t]})})}))}),Object(c.jsx)("div",{onClick:function(){x(!0)},children:"stop"}),Object(c.jsx)("div",{onClick:g,children:"start"})]})};var j=function(){var e=Object(a.useState)([3,2,6,8,7,9,1,4,5]),t=Object(u.a)(e,2),n=t[0],o=t[1],r=s(0,10),i=s(0,-10),b=function(e){var t=Object(a.useRef)(!0),n=Object(a.useRef)(!0),c=Object(a.useState)({index:1,lock:0,data:Object(l.a)(e),exchange:!1}),o=Object(u.a)(c,2),r=o[0],i=o[1],s=Object(a.useMemo)((function(){var c=!1,a=function(e){c=e},o=function(e){a(!1),e()};return function(l){console.log(t.current,"-----------------"),c||t.current||(a(!0),setTimeout((function(){if(r.data[r.lock]>r.data[r.index]){console.log("\u4ea4\u6362"),n.current=!1;var c=r.data[r.lock];r.data[r.lock]=r.data[r.index],r.data[r.index]=c,r.exchange=!0,i(Object(d.a)({},r))}else console.log("\u524d\u8fdb"),r.exchange=!1,r.index++,r.index===e.length&&(r.lock++,r.lock===e.length-1?(t.current=!0,r.lock++):r.index=r.lock+1),i(Object(d.a)({},r));l(o,Object(d.a)({},r))}),50))}}),[]),b=Object(a.useCallback)((function(e){console.log("Bubble next",t.current),s(e)}),[s]),j=Object(a.useCallback)((function(e){console.log("Bubble setStop",t.current),t.current=e}),[]);return{data:r,next:b,setStop:j}}(n),j=b.data,x=b.setStop,f=b.next,O=j.index,h=j.lock,g=Object(a.useCallback)((function(){f((function(e,t){if(t.exchange){console.log(t);var n=t.index-t.lock,c=i.start((function(n){o(Object(l.a)(t.data)),c(),a(),e(g)}),(function(e){return console.log("-----",e),e===-70*n})),a=r.start((function(e){}),(function(e){return e===70*n}))}else e(g)}))}),[j.index,j.exchange].concat(Object(l.a)(j.data))),k=Object(a.useCallback)((function(){x(!1),g()}),[]);return Object(c.jsxs)("div",{children:[Object(c.jsx)("h2",{children:"\u9009\u62e9\u6392\u5e8f"}),Object(c.jsx)("div",{style:{display:"flex",alignItems:"flex-end"},children:n.map((function(e,t){return Object(c.jsx)("div",{style:{width:"50px",height:20*e,background:t<h?"green":t===h?"red":t===O?"yellow":"#333",transform:t===O?"translateX(".concat(i.data,"px)"):t===h?"translateX(".concat(r.data,"px)"):"translateX(0px)",margin:"0 10px",float:"left"},children:Object(c.jsxs)("div",{children:[h,"-",O,"-",t]})})}))}),Object(c.jsx)("div",{onClick:function(){x(!0)},children:"stop"}),Object(c.jsx)("div",{onClick:k,children:"start"})]})};var x=function(){var e=Object(a.useState)([3,2,6,8,7,9,1,4,5]),t=Object(u.a)(e,2),n=t[0],o=t[1],r=s(0,10),i=s(0,-10),b=function(e){var t=Object(a.useRef)(!0),n=Object(a.useRef)(!0),c=Object(a.useState)({index:0,lock:1,data:Object(l.a)(e),exchange:!1}),o=Object(u.a)(c,2),r=o[0],i=o[1],s=Object(a.useMemo)((function(){var c=!1,a=function(e){c=e},o=function(e){a(!1),e()};return function(l){console.log(t.current,"-----------------"),c||t.current||(a(!0),setTimeout((function(){if(r.lock!==e.length){if(r.data[r.lock]>=r.data[r.index])console.log("\u524d\u8fdb"),r.exchange=!1,r.index++,r.index===r.lock&&(r.lock++,r.index=0),i(Object(d.a)({},r));else{console.log("\u63d2\u5165"),n.current=!1;for(var c=r.data[r.lock],a=r.lock;a>=r.index;a--)r.data[a]=r.data[a-1];console.log("oooooo",JSON.stringify(r.data),r.lock,r.index),r.data[r.index]=c,r.exchange=!0,i(Object(d.a)({},r))}l(o,Object(d.a)({},r))}else t.current=!1}),50))}}),[]),b=Object(a.useCallback)((function(e){console.log("Bubble next",t.current),s(e)}),[s]),j=Object(a.useCallback)((function(e){console.log("Bubble setStop",t.current),t.current=e}),[]);return{data:r,next:b,setStop:j}}(n),j=b.data,x=b.setStop,f=b.next,O=j.index,h=j.lock,g=Object(a.useCallback)((function(){f((function(e,t){if(t.exchange){console.log(t);var n=t.lock-t.index,c=i.start((function(n){o(Object(l.a)(t.data)),a(),c(),e(g)}),(function(e){return console.log("-----",e),e===-70*n})),a=r.start((function(e){}),(function(e){return 70===e}))}else e(g)}))}),[j.index,j.exchange].concat(Object(l.a)(j.data))),k=Object(a.useCallback)((function(){x(!1),g()}),[]);return Object(c.jsxs)("div",{children:[Object(c.jsx)("h2",{children:"\u63d2\u5165\u6392\u5e8f"}),Object(c.jsx)("div",{style:{display:"flex",alignItems:"flex-end"},children:n.map((function(e,t){return Object(c.jsx)("div",{style:{width:"50px",height:20*e,background:t<h&&t!==O?"green":t===h?"red":t===O?"yellow":"#333",transform:t>=O&&t<h?"translateX(".concat(r.data,"px)"):t===h?"translateX(".concat(i.data,"px)"):"translateX(0px)",margin:"0 10px",float:"left"},children:Object(c.jsxs)("div",{children:[h,"-",O,"-",t]})})}))}),Object(c.jsx)("div",{onClick:function(){x(!0)},children:"stop"}),Object(c.jsx)("div",{onClick:k,children:"start"})]})};var f=function(){return Object(c.jsxs)("div",{style:{width:1e3,margin:"0 auto"},children:[Object(c.jsx)(b,{}),Object(c.jsx)(j,{}),Object(c.jsx)(x,{})]})};i.a.render(Object(c.jsx)(o.a.StrictMode,{children:Object(c.jsx)(f,{})}),document.getElementById("root"))}},[[14,1,2]]]);
//# sourceMappingURL=main.5be39f8b.chunk.js.map